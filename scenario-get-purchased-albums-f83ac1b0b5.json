{"id":"purchease-albums;get-purchased-albums","name":"Get Purchased albums","title":"Get Purchased albums","manual":false,"testSteps":[{"number":1,"description":"Before","startTime":1636641354017,"children":[],"reportData":[],"screenshots":[],"duration":0,"result":"SUCCESS"},{"number":2,"description":"Given Carlos is logged in the application as an adminUser","startTime":1636641354017,"children":[{"number":3,"description":"Carlos login with the credentials of an adminUser to /users/sessions","startTime":1636641354032,"children":[{"number":4,"description":"Carlos sends a POST request to '/users/sessions'","startTime":1636641354045,"children":[],"reportData":[],"screenshots":[],"duration":2007,"result":"SUCCESS","restQuery":{"method":"POST","path":"https://nodejs-qa-training.herokuapp.com/users/sessions","content":"{\"email\":\"admin@wolox.com.ar\",\"password\":\"candidatoWolox2020\"}","contentType":"application/json","requestHeaders":"Accept: application/json,application/xml\nContent-Type: application/json\nUser-Agent: axios/0.21.4\nContent-Length: 62","requestCookies":"","statusCode":200,"responseHeaders":"server: Cowboy\nconnection: close\nx-powered-by: Express\nauthorization: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjE0Niwicm9sZSI6ImFkbWluIiwiaWF0IjoxNjM2NjQxMzU2LjM1MywiZXhwIjoxNjM2NjQzMTU2LjM1M30.d7Mrp8PpS_netk2kwmoP95a3KM-Kqz9CXUFLX5BLVKE\ncontent-type: application/json; charset=utf-8\ncontent-length: 51\netag: W/\"33-jaj9SSAvNezc4W5RO2zzocf1wjM\"\ndate: Thu, 11 Nov 2021 14:35:56 GMT\nvia: 1.1 vegur","responseCookies":"","responseBody":"{\n    \"user_id\": 146,\n    \"token_expires_at\": \"1636643156.353\"\n}"}},{"number":5,"description":"Carlos ensures that the status of the last response does equal 200","startTime":1636641356063,"children":[],"reportData":[],"screenshots":[],"duration":1,"result":"SUCCESS"},{"number":6,"description":"Carlos ensures that the body of the last response does match with schema { \"$schema\": \"http://json-schema.org/draft-04/schema#\", \"type\": \"object\", \"properties\": { \"user_id\": { \"type\": \"integer\" }, \"token_expires_at\": { \"type\": \"string\" } }, \"required\": [ \"user_id\", \"token_expires_at\" ] }","startTime":1636641356078,"children":[],"reportData":[],"screenshots":[],"duration":3,"result":"SUCCESS"},{"number":7,"description":"Carlos takes note of 'token'","startTime":1636641356092,"children":[],"reportData":[],"screenshots":[],"duration":0,"result":"SUCCESS"},{"number":8,"description":"Carlos changes API URL and sets header \"Authorization\" to \"the 'authorization' header of the last response\"","startTime":1636641356103,"children":[],"reportData":[],"screenshots":[],"duration":1,"result":"SUCCESS"},{"number":9,"description":"Carlos takes note of 'user_id'","startTime":1636641356115,"children":[],"reportData":[],"screenshots":[],"duration":0,"result":"SUCCESS"}],"reportData":[],"screenshots":[],"duration":2083,"result":"SUCCESS"}],"reportData":[],"screenshots":[],"duration":2099,"result":"SUCCESS"},{"number":10,"description":"When he buys some album of the list of availables","startTime":1636641356116,"children":[{"number":11,"description":"Carlos get list of albums","startTime":1636641356128,"children":[{"number":12,"description":"Carlos changes API URL and sets header \"Authorization\" to \"a note of token\"","startTime":1636641356139,"children":[],"reportData":[],"screenshots":[],"duration":0,"result":"SUCCESS"},{"number":13,"description":"Carlos sends a GET request to '/albums'","startTime":1636641356150,"children":[],"reportData":[],"screenshots":[],"duration":2008,"result":"COMPROMISED","exception":{"errorType":"TestCompromisedError","message":"The request has timed out","stackTrace":[{"declaringClass":"","methodName":"undefined()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/@serenity-js/rest/src/screenplay/abilities/CallAnApi.ts","lineNumber":198},{"declaringClass":"","methodName":"processTicksAndRejections()","fileName":"node:internal/process/task_queues","lineNumber":96},{"declaringClass":"","methodName":"createError()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/core/createError.js","lineNumber":16},{"declaringClass":"","methodName":"RedirectableRequest.handleRequestTimeout()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/adapters/http.js","lineNumber":303},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:events","lineNumber":390},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:domain","lineNumber":475},{"declaringClass":"","methodName":"Timeout.<anonymous>()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/follow-redirects/index.js","lineNumber":164},{"declaringClass":"","methodName":"listOnTimeout()","fileName":"node:internal/timers","lineNumber":557},{"declaringClass":"","methodName":"processTimers()","fileName":"node:internal/timers","lineNumber":500}],"rootCause":{"errorType":"Error","message":"timeout of 2000ms exceeded","stackTrace":[{"declaringClass":"","methodName":"createError()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/core/createError.js","lineNumber":16},{"declaringClass":"","methodName":"RedirectableRequest.handleRequestTimeout()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/adapters/http.js","lineNumber":303},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:events","lineNumber":390},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:domain","lineNumber":475},{"declaringClass":"","methodName":"Timeout.<anonymous>()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/follow-redirects/index.js","lineNumber":164},{"declaringClass":"","methodName":"listOnTimeout()","fileName":"node:internal/timers","lineNumber":557},{"declaringClass":"","methodName":"processTimers()","fileName":"node:internal/timers","lineNumber":500}]}}}],"reportData":[],"screenshots":[],"duration":2030,"result":"COMPROMISED"}],"reportData":[],"screenshots":[],"duration":2043,"result":"COMPROMISED"},{"number":14,"description":"Then he should see a list with all his purchased album","startTime":1636641358160,"children":[],"reportData":[],"screenshots":[],"duration":4,"result":"PENDING"}],"userStory":{"id":"purchease-albums","storyName":"Purchease albums","path":"src/features/albums/albumPurchease.feature","type":"feature","narrative":"As a user of the application\nI want to purchease albums"},"startTime":1636641354016,"testSource":"Cucumber","tags":[{"name":"albums","type":"capability","displayName":"albums"},{"name":"albums/Purchease albums","type":"feature","displayName":"Purchease albums"}],"featureTag":{"name":"albums/Purchease albums","type":"feature","displayName":"Purchease albums"},"result":"COMPROMISED","testFailureCause":{"errorType":"TestCompromisedError","message":"The request has timed out","stackTrace":[{"declaringClass":"","methodName":"undefined()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/@serenity-js/rest/src/screenplay/abilities/CallAnApi.ts","lineNumber":198},{"declaringClass":"","methodName":"processTicksAndRejections()","fileName":"node:internal/process/task_queues","lineNumber":96},{"declaringClass":"","methodName":"createError()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/core/createError.js","lineNumber":16},{"declaringClass":"","methodName":"RedirectableRequest.handleRequestTimeout()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/axios/lib/adapters/http.js","lineNumber":303},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:events","lineNumber":390},{"declaringClass":"","methodName":"RedirectableRequest.emit()","fileName":"node:domain","lineNumber":475},{"declaringClass":"","methodName":"Timeout.<anonymous>()","fileName":"/Users/gabriel.bori/Documents/automation/apiAutomation/gb-se-ts/node_modules/follow-redirects/index.js","lineNumber":164},{"declaringClass":"","methodName":"listOnTimeout()","fileName":"node:internal/timers","lineNumber":557},{"declaringClass":"","methodName":"processTimers()","fileName":"node:internal/timers","lineNumber":500}]},"testFailureClassname":"TestCompromisedError","testFailureMessage":"The request has timed out","testFailureSummary":"COMPROMISED;TestCompromisedError;The request has timed out;node:internal/process/task_queues","duration":4163}